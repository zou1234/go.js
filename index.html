<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Document</title>
    <style>
        body{
            background: #ccc;
        }
        .l-go-pop{
            width: 60%;
            margin: 40px auto;
            min-height: 800px;
            box-shadow: 0 0 10px #8087c1;
            padding: 20px 30px 40px 30px;
            border-radius: 15px;
            border-top: 20px solid #8087c1;
            border-bottom: 20px solid #8087c1;
            background: #fff;
            min-width: 1280px;
        }
        .l-go-h1{
            text-align: center;
            color: #8087c1;
        }
        .l-go-table{
            border: 1px solid #c18880;
            margin: 0 auto;
            border-right: none;
            border-bottom: none;
            width: 100%;
        }
        .l-go-table td{
            border-right: 1px solid #c18880;
            border-bottom: 1px solid #c18880;
            text-align: center;
            padding: 10px;

        }
        .l-go-table th{
            height: 50px;
            background: #c18880;
            color: #fff;
        }
        .l-go-table-item{
            background: #f5f5f5;
            padding: 10px 10px;
            text-align: left;
            font-size: 14px;
            border-radius: 10px;
            /*border: 1px solid #a57171;*/
            border: 1px solid #ccc;
        }
        .l-go-title{
            color: #a57171;
            border: 1px solid #8087c1;
            margin-bottom: 20px;
            border-radius: 3px;
        }
        .l-go-title span{
            display: inline-block;
            padding: 5px 35px;
            font-size: 16px;
            cursor: pointer;
            font-weight: 600;
        }
        .l-go-title-active{
            border: 1px solid #8087c1;
            background: #8087c1;
            color: #fff;
        }
        .l-go-table-item-center{
            text-align: center;
        }
        .l-go-more{
            padding: 15px 0;
        }
        .l-go-more a{
            text-decoration: none;
            /*border: 1px solid red;*/
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="l-go-pop">
        <h2 class="l-go-h1">《Go.js基础手册》</h2>
        <div class="l-go-title">
            <span class="l-go-title-active">常用事件</span>
            <span>常用API</span>
            <span>通用属性</span>
        </div>
        <div class="l-go-table-1">
            <table class="l-go-table" cellspacing="0" cellpadding="0">
                <thead>
                <th style="width: 15%">名称</th>
                <th style="width: 15%">API</th>
                <th style="width: 45%">例子</th>
                <th style="width: 25%">应用场景</th>
                </thead>
                <tbody class="l-go-tbody-1"></tbody>
            </table>
            <div class="l-go-more">
                <a href="https://gojs.net/latest/intro/events.html#SelectionDeleting">
                    更多：https://gojs.net/latest/intro/events.html#SelectionDeleting
                </a>
            </div>
        </div>
        <div class="l-go-table-2" style="display: none">
            <table class="l-go-table" cellspacing="0" cellpadding="0">
                <thead>
                <th style="width: 20%">名称</th>
                <th style="width: 15%">API</th>
                <th style="width: 40%">例子</th>
                <th style="width: 25%">应用场景</th>
                </thead>
                <tbody class="l-go-tbody-2"></tbody>
            </table>
        </div>
        <div class="l-go-table-3" style="display: none">
            <table class="l-go-table" cellspacing="0" cellpadding="0">
                <thead>
                <th style="width: 20%">名称</th>
                <th style="width: 15%">属性</th>
                <th style="width: 40%">例子</th>
                <th style="width: 25%">应用场景</th>
                </thead>
                <tbody class="l-go-tbody-3"></tbody>
            </table>
        </div>
    </div>
</body>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script>
    let json = [
        {
            name:"选中事件",
            api:"selectionChanged",
            example: "selectionChanged : function(node,obj){ <br> let data = node.part.data//当前选中节点数据;console.log(data) <br>}",
            scene:'通过外部按钮点击选中时候会触发，普通点击节点也会触发'
        },
        {
            name:"节点双击",
            api:"doubleClick",
            example:'doubleClick : function (node,obj) {<br>console.log(obj.part.data) //当前双击数据节点数据<br>}',
            scene:'通过按钮双击触发'
        },
        {
            name:"单击事件",
            api:"click",
            example:'click : function (node,obj) {<br>console.log(obj.part.data) //当前单击数据节点数据<br>}',
            scene:'通过按钮点击触发'
        },
        {
            name:"鼠标右键",
            api:"contextClick",
            example:'contextClick : function (node,obj) {<br>console.log(obj.part.data) //当前点击右键节点数据<br>}',
            scene:'通过点击鼠标右键触发'
        },
        {
            name:"鼠标悬浮",
            api:"mouseEnter",
            example:'mouseEnter : function (node,obj) {<br>console.log(obj.part.data) //当前点击右键节点数据<br>}',
            scene:'通过鼠标悬浮到节点'
        },
        {
            name:"鼠标离开",
            api:"mouseLeave",
            example:'mouseLeave : function (node,obj) {<br>console.log(obj.part.data) //当前点击右键节点数据<br>}',
            scene:'鼠标离开节点'
        },
        {
            name:"画布空白部分点击",
            api:"BackgroundSingleClicked",
            example: 'myDiagram.addDiagramListener("BackgroundSingleClicked", function(e) {<br>console.log(e)<br>})',
            scene:'点击画布空白部分时候会触发该事件'
        },
        {
            name:"拖动事件",
            api:"ExternalObjectsDropped",
            example: 'myDiagram.addDiagramListener("ExternalObjectsDropped", function(e) {<br>console.log(e)<br>})',
            scene:'配置连线时，配置项拖动到要配置的画布时候触发 注意！不是普通拖动节点'
        },
        {
            name:"监听节点和线删除",
            api:"SelectionDeleting",
            example: 'myDiagram.addDiagramListener("SelectionDeleting", function(e) {<br>console.log(e)<br>})',
            scene:'节点和线被删除时候触发'
        }
    ];
    let json2 = [
        {
            name:"添加节点",
            api:"myDiagram.model.addNodeData()",
            example:'var node = {};node["key"] = "节点Key";node["loc"] = "0 0"//节点坐标node["text"] = "节点名称";myDiagram.model.addNodeData(node);',
            scene:'通过按钮点击，添加新的节点到画布'
        },
        {
            name:"删除选中节点",
            api:"myDiagram.commandHandler.deleteSelection()",
            example:'if (myDiagram.commandHandler.canDeleteSelection()) {\n' +
            '    myDiagram.commandHandler.deleteSelection();\n' +
            '    return;\n' +
            '}',
            scene:'页面上有个按钮点击，可以删除选择的节点和线'
        },
        {
            name:"获取当前画布的json",
            api:"myDiagram.model.toJson()",
            example:'var model= myDiagram.model.toJson()获得整个画布的json\n' +
            '//model=eval(\'(\'+model+\')\')若格式异常抓一下\n' +
            'var nodes=model.nodeDataArray取出所有节点\n' +
            'var Links=model.linkDataArray取出所有线',
            scene:'获取当前画布的所有元素的json,用来保存'
        },
        {
            name:"通过节点key获取节点",
            api:"myDiagram.model.findNodeDataForKey()",
            example:'var node = myDiagram.model.findNodeDataForKey(\'key\')',
            scene:'知道节点key ,拿到这个节点的详细信息'
        },
        {
            name:"加载json刷新画布",
            api:"myDiagram.model = go.Model.fromJson()",
            example:'model = myDiagram.model.toJson()  <br>' + 'myDiagram.model = go.Model.fromJson(model)',
            scene:'一般用来刷新和加载画布上的元素'
        },
        {
            name:"更改节点属性值",
            api:'myDiagram.model.setDataProperty()',
            example:"var node = myDiagram.model.findNodeDataForKey('key');//首先拿到这个节点的对象\n" +
            "myDiagram.model.setDataProperty(node, 'color', \"#ededed\");//然后对这个对象的属性进行更改",
            scene:'更改节点的颜色，或者大小等'
        },
        {
            name:"给节点添加线",
            api:'myDiagram.model.addLinkData()',
            example:"myDiagram.model.addLinkData({ from: \"节点的Key\", to: \"连到另一节点的key\" })",
            scene:'把两个节点用线连接起来'
        },
        {
            name:"选中节点",
            api:'myDiagram.select()',
            example:"var newdata = { \"text\":\"AAAA\", \"key\":-33,\"loc\":\"0 0\" };\n" +
            "            myDiagram.model.addNodeData(newdata);\n" +
            "            var newdat2= myDiagram.model.findNodeDataForKey('-3');\n" +
            "            console.log(newdat2);\n" +
            "            var node = myDiagram.findNodeForData(newdat2);\n" +
            "            console.log(node);\n" +
            " myDiagram.select(node)//选中节点",
            scene:'选择节点选中'
        }
    ];
    let json3 = [
        {
            name:"边框",
            api:"stroke",
            example:'{ stroke: "#9dc7ff" }',
            scene:'添加边框颜色'
        },
        {
            name:"间距",
            api:"margin",
            example:'写法1 { margin: 5 };写法2 { margin: new go.Margin(12, 0, 0, 0) } //分别代表4个方向',
            scene:'对节点设置外边距'
        },
        {
            name:"元素显示隐藏",
            api:"visible",
            example:'{ visible: true } //true为可见，false为不可见 ',
            scene:'控制节点部分内容的显示隐藏'
        },
        {
            name:"对齐",
            api:"textAlign",
            example:'{ textAlign: center } //true为可见，false为不可见 ',
            scene:'使文本对齐'
        },

    ];

    init(".l-go-tbody-1",json ,1);
    /**
     *
     * 配置表格（元素、样式、动态数据）
     * @el 表格选择器
     * @data 表格数据
     *
     * */
    function init(el,data) {
        let html = "";
        data.forEach((val)=>{
            let example = val.example.split(";").join(";<br>");
            html+= `<tr>
                    <td>
                        <div class="l-go-table-item l-go-table-item-center"> ${val.name}</div>
                    </td>
                    <td>
                        <div class="l-go-table-item l-go-table-item-center"> ${val.api}</div>
                    </td>
                    <td>
                        <div class="l-go-table-item">${example}</div>
                    </td>
                    <td>
                        <div class="l-go-table-item"> ${val.scene}</div>
                    </td>
                </tr>`
        });
        $(el).empty();
        $(el).append(html)
    }

    $(".l-go-title").on("click","span",function () {
        $(this).addClass("l-go-title-active");
        $(this).siblings().removeClass("l-go-title-active");
        let text = $(this).html();
        if(text === '常用事件'){
            $(".l-go-table-1").show();
            $(".l-go-table-2").hide();
            $(".l-go-table-3").hide();
            init(".l-go-tbody-1",json ,1);
        }else if(text === '常用API'){
            $(".l-go-table-1").hide();
            $(".l-go-table-2").show();
            $(".l-go-table-3").hide();
            init(".l-go-tbody-2",json2 ,1);
        }else {
            $(".l-go-table-3").show();
            $(".l-go-table-2").hide();
            $(".l-go-table-1").hide();
            init(".l-go-tbody-3",json3 ,1);
        }
    })
</script>
</html>